# app.py
import time
import random
import streamlit as st

# ------------------------- ê¸°ë³¸ ì„¤ì • -------------------------
st.set_page_config(
    page_title="MBTI Ã— ì—­ì‚¬ ê³µë¶€ ì¶”ì²œ",
    page_icon="ğŸ“š",
    layout="wide"
)

# ------------------------- ìŠ¤íƒ€ì¼ & íš¨ê³¼ -------------------------
EMOJI_POOL = ["ğŸ“š","ğŸ—ºï¸","ğŸ¯","ğŸ›ï¸","ğŸ§­","ğŸ§ ","ğŸ§©","âœ¨","ğŸŒŸ","ğŸ¯","âš”ï¸","ğŸº","ğŸ“","ğŸ”","ğŸ“œ","ğŸ—¿","ğŸš€","ğŸŒ","ğŸ‡°ğŸ‡·","ğŸ®"]

def rainbow_title(text):
    st.markdown(
        f"""
        <h1 style="
            font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
            font-size: 46px;
            background: linear-gradient(90deg,#ff7a7a,#ffd36e,#7affb5,#6ecbff,#c89cff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0 0 8px 0;
        ">{text}</h1>
        """,
        unsafe_allow_html=True
    )

def floating_emoji_layer():
    # ë‹¨ìˆœ CSSë¡œ ë‘¥ë‘¥ ë– ë‹¤ë‹ˆëŠ” ì´ëª¨ì§€ë“¤
    emojis = random.sample(EMOJI_POOL, k=8)
    items = "".join(
        [
            f"""<span class="float-emoji" style="left:{i*10+5}%; animation-delay:{i*0.6}s">{e}</span>"""
            for i, e in enumerate(emojis)
        ]
    )
    st.markdown(
        f"""
        <style>
        .float-emoji {{
            position: fixed;
            bottom: -30px;
            font-size: 28px;
            opacity: 0.85;
            animation: rise 10s linear infinite;
            z-index: 0;
        }}
        @keyframes rise {{
            0%   {{ transform: translateY(0);     opacity: 0.0; }}
            10%  {{ opacity: 0.9; }}
            90%  {{ opacity: 0.9; }}
            100% {{ transform: translateY(-120vh); opacity: 0.0; }}
        }}
        /* ì»¨í…ì¸  ìœ„ í´ë¦­ ë°©ì§€ */
        .block-container, .main, [data-testid="stAppViewContainer"] * {{ position: relative; z-index: 1; }}
        </style>
        {items}
        """,
        unsafe_allow_html=True
    )

floating_emoji_layer()

# ------------------------- ë°ì´í„° -------------------------
GROUPS = {
    "NT": {"name":"ë¶„ì„í˜•(Analysts)", "emoji":"ğŸ§ ", "vibe":"ë…¼ë¦¬ Â· ì‹œìŠ¤í…œ Â· ì „ëµ"},
    "NF": {"name":"ì™¸êµí˜•(Diplomats)", "emoji":"ğŸŒ±", "vibe":"ì˜ë¯¸ Â· ê³µê° Â· ìŠ¤í† ë¦¬"},
    "SJ": {"name":"ìˆ˜í˜¸í˜•(Sentinels)", "emoji":"ğŸ›¡ï¸", "vibe":"ì²´ê³„ Â· ì„±ì‹¤ Â· ê¸°ë¡"},
    "SP": {"name":"íƒí—˜í˜•(Explorers)", "emoji":"ğŸ§­", "vibe":"ê²½í—˜ Â· ì‹¤ìŠµ Â· ê²Œì„"}
}

MBTI_GROUP = {
    "INTJ":"NT","INTP":"NT","ENTJ":"NT","ENTP":"NT",
    "INFJ":"NF","INFP":"NF","ENFJ":"NF","ENFP":"NF",
    "ISTJ":"SJ","ISFJ":"SJ","ESTJ":"SJ","ESFJ":"SJ",
    "ISTP":"SP","ISFP":"SP","ESTP":"SP","ESFP":"SP",
}

# ê³µí†µ ê°€ì´ë“œ(ê·¸ë£¹ë³„ ë² ì´ìŠ¤) â€” í•œêµ­ì‚¬/ì„¸ê³„ì‚¬ ê³µí†µ ë¼ˆëŒ€
BASE_STRATEGY = {
    "NT": {
        "core": ["ê°œë… ë§µí•‘ ğŸ§©","ì¸ê³¼ê´€ê³„ í™”ì‚´í‘œ â¡ï¸","ë¹„êµí‘œ ğŸ“Š","íƒ€ì„ë¼ì¸ â³","ê°€ì„¤-ê²€ì¦ ğŸ”¬"],
        "k_activities": [
            "ì¡°ì„ ~ëŒ€í•œì œêµ­ ê²½ì œÂ·ì œë„ ë³€ì²œ ì¸ê³¼ ê·¸ë˜í”„ ë§Œë“¤ê¸° ğŸ“ˆ",
            "ê°œí•­ê¸° ì¡°ì•½ ë¹„êµí‘œ(ì¡°ì•½ ì¡°í•­â†’ì˜í–¥â†’ì‚¬íšŒ ë³€í™”) ì •ë¦¬ ğŸ“‹",
            "3Â·1ìš´ë™ê³¼ ì„ì‹œì •ë¶€ ë…¸ì„  ì°¨ì´ â€˜ì£¼ì¥â€“ê·¼ê±°â€™ ì¹´ë“œ ì†ŒíŒ… ğŸƒ"
        ],
        "w_activities": [
            "ì œêµ­ì£¼ì˜ ì›ì¸-ê²°ê³¼ ë§¤íŠ¸ë¦­ìŠ¤(ì •ì¹˜Â·ê²½ì œÂ·ê¸°ìˆ Â·ì‚¬ìƒ) ğŸ—ºï¸",
            "ì„¸ê³„ëŒ€ì „ ì „ê°„ê¸°(1919~39) ì •ì±… ì‹œë®¬ë ˆì´ì…˜ ë¯¸ë‹ˆ í† ë¡  ğŸ¤",
            "ì‚°ì—…í˜ëª… ê¸°ìˆ  ë°œì „ â†’ ë…¸ë™Â·ë„ì‹œ ë³€í™” â€˜ì‹œìŠ¤í…œ ë‹¤ì´ì–´ê·¸ë¨â€™ âš™ï¸"
        ],
        "tips": ["ì¦ê±°â€“ì£¼ì¥â€“ì¶”ë¡ (Claimâ€“Evidenceâ€“Reasoning) êµ¬ì¡°ë¡œ ë‹µì•ˆ ì“°ê¸° ğŸ§±",
                 "í†µê³„Â·ì§€ë„Â·ì‚¬ë£Œì—ì„œ â€˜íŒ¨í„´â€™ ë¨¼ì € ì°¾ê¸° ğŸ”",
                 "ì˜¤ë‹µë…¸íŠ¸ëŠ” â€˜ì™œ í‹€ë ¸ëŠ”ê°€â€™ ë¡œì§ ì¤‘ì‹¬ ë©”ëª¨ ğŸ“"]
    },
    "NF": {
        "core": ["ì„œì‚¬ ë§Œë“¤ê¸° ğŸ“–","ì¸ë¬¼ ê´€ì  ì „í™˜ ğŸ‘“","ê°€ì¹˜Â·ìœ¤ë¦¬ í† ë¡  ğŸ’¬","ê°ì •Â·ë§¥ë½ ì—°ê²° ğŸ’¡"],
        "k_activities": [
            "ì˜ë³‘Â·ê³„ëª½ìš´ë™ â€˜ê°€ìƒ ì‹ ë¬¸ ì¸í„°ë·°â€™ ì‘ì„± ğŸ—ï¸",
            "ì¼ì œê°•ì ê¸° ì¸ë¬¼ ì¼ê¸°(ê·¸ë‚ ì˜ ì„ íƒê³¼ ê³ ë¯¼) âœï¸",
            "ëŒ€í•œë¯¼êµ­ ìˆ˜ë¦½ ì „í›„ ì°¬ë°˜ í† ë¡  íŒŸìºìŠ¤íŠ¸ ğŸ™ï¸"
        ],
        "w_activities": [
            "ë¥´ë„¤ìƒìŠ¤ ì˜ˆìˆ ê°€ vs ì¢…êµê°œí˜ê°€ ëŒ€í™”ê·¹ ğŸ­",
            "ëŒ€í•­í•´ì‹œëŒ€ ì›ì£¼ë¯¼ ì‹œì  ì¹´ë“œìŠ¤í† ë¦¬ ğŸ“‡",
            "ëƒ‰ì „ì‹œëŒ€ ì‹œë¯¼ì˜ í•˜ë£¨: ë™ì„œë… ì²­ì†Œë…„ í¸ì§€ êµí™˜ âœ‰ï¸"
        ],
        "tips": ["ì‚¬ë£Œë¥¼ â€˜ì‚¬ëŒì˜ ëª©ì†Œë¦¬â€™ë¡œ ì½ê¸°(ì˜ë„Â·ê°ì •Â·ìƒí™©) ğŸ—£ï¸",
                 "ë…¼ìŸì  ì§ˆë¬¸ì— ì°¬Â·ë°˜ ê° 2ê·¼ê±°ì”© ê· í˜•ë§ì¶”ê¸° âš–ï¸",
                 "ì•”ê¸°ëŠ” â€˜ìŠ¤í† ë¦¬ ë¶ë§ˆí¬(ì‚¬ê±´-ì¸ë¬¼-ì¥ì†Œ-ìƒì§•)â€™ë¡œ ğŸŒŸ"]
    },
    "SJ": {
        "core": ["ë£¨í‹´Â·ì²´í¬ë¦¬ìŠ¤íŠ¸ âœ…","ì—°í‘œÂ·ìš©ì–´ ì¹´ë“œ ğŸ“‡","ê¸°ì¶œ ìœ í˜•ë³„ í´ë”ë§ ğŸ—‚ï¸","ì˜¤ë‹µ ë£¨í”„ â™»ï¸"],
        "k_activities": [
            "ì‚¼êµ­~í†µì¼ì‹ ë¼â†’ê³ ë ¤â†’ì¡°ì„  í•µì‹¬ ì œë„ ì—°í‘œ ì™„ì„± â±ï¸",
            "ì¡°ì„¸Â·êµ°ì—­Â·ì‹ ë¶„ì œ í•µì‹¬ìš©ì–´ ì¹´ë“œ 100ì¥ ë§Œë“¤ê¸° ğŸªª",
            "ê·¼í˜„ëŒ€ì‚¬ ì—°ë„-ì‚¬ê±´-í‚¤ì›Œë“œ 3ë‹¨ ì•”ê¸°í‘œ ğŸ§¾"
        ],
        "w_activities": [
            "ê³ ëŒ€â†’ì¤‘ì„¸â†’ê·¼ëŒ€ ì „í™˜ í¬ì¸íŠ¸ ë„ì‹í™” ğŸ§­",
            "í”„ë‘ìŠ¤í˜ëª…~ë¹ˆì²´ì œ~ë¯¼ì¡±ì£¼ì˜ íë¦„ í‘œë¡œ ì •ë¦¬ ğŸ“‘",
            "ì„¸ê³„ëŒ€ì „ ì—°í•©Â·ì¶”ì¶• ì „ì„  ì§€ë„ í€´ì¦ˆ ğŸ—ºï¸"
        ],
        "tips": ["â€˜ì•„ì¹¨ 20ë¶„ ë³µìŠµ+ì£¼ë§ 60ë¶„ ì´ì •ë¦¬â€™ ê³ ì • ë£¨í‹´ â°",
                 "í‹€ë¦° ë¬¸ì œëŠ” ì›ì¸ íƒœê·¸(ê°œë…/ì—°ë„/ì‚¬ë£Œ) ë¶™ì´ê¸° ğŸ·ï¸",
                 "ë¬¸ì œì§‘ì€ íšŒì°¨ë³„ ëª©í‘œ(ë²”ìœ„Â·ì‹œê°„Â·ì •í™•ë„) ëª…ì‹œ ğŸ¯"]
    },
    "SP": {
        "core": ["ì²´í—˜Â·ê²Œì„í™” ğŸ®","ì§§ê³  êµµì€ ìŠ¤í”„ë¦°íŠ¸ â±ï¸","ì‹œê°í™”Â·ëª¨í˜• ğŸ§±","í˜„ì¥Â·ì§€ë„ë¡œ ì—°ê²° ğŸ—ºï¸"],
        "k_activities": [
            "ì°½ë•ê¶Â·ê²½ë³µê¶ ê°€ìƒ íˆ¬ì–´ í›„ ë¯¸ì…˜í˜• í€´ì¦ˆ ğŸ¯",
            "í›ˆë¯¼ì •ìŒ ì°½ì œ ì¹´ë“œ ë’¤ì§‘ê¸° ê²Œì„(ì›ë¦¬ ë§¤ì¹­) ğŸƒ",
            "ë…ë¦½ìš´ë™ ê±°ì  ì§€ë„ ì°ê³  â€˜íƒˆì¶œ ë£°ë › í€˜ìŠ¤íŠ¸â€™ ğŸ§­"
        ],
        "w_activities": [
            "ê³ ëŒ€ ë¬¸ëª… ìƒì¡´í‚¤íŠ¸ ë§Œë“¤ê¸°(ê°•Â·ê¸°í›„Â·ì‘ë¬¼ ì„ íƒ) ğŸ•ï¸",
            "ëŒ€í•­í•´ í•­ë¡œ í¼ì¦(í’í–¥Â·í•´ë¥˜Â·êµì—­í’ˆ ë§¤ì¹­) ğŸŒ¬ï¸",
            "ì½œë“œì›Œ ìŠ¤íŒŒì´ ë³´ë“œê²Œì„(ì •ë³´ ì¹´ë“œë¡œ í˜‘ìƒ) ğŸ•µï¸"
        ],
        "tips": ["25ë¶„ ì§‘ì¤‘Â·5ë¶„ ë¦¬ì…‹ â€˜í¬ëª¨ë„ë¡œâ€™ë¡œ íƒ„ë ¥ ìˆê²Œ ğŸ…",
                 "ì´ë¯¸ì§€Â·ì˜ìƒ ìš”ì•½ 3ì¤„ â†’ ë§í’ì„  ì¹´ë“œë¡œ ì •ë¦¬ ğŸ’¬",
                 "í€˜ìŠ¤íŠ¸í˜• ì²´í¬ë¦¬ìŠ¤íŠ¸ë¡œ ë‹¬ì„±ê° ì—… ğŸ“ˆ"]
    }
}

# íƒ€ì…ë³„ ì†Œì†Œí•œ ë§ì¶¤ ë©”ì‹œì§€(ê°œì„±)
PERSONA = {
    "INTJ":"ì „ëµê°€ ëª¨ë“œ ON â™Ÿï¸ ë³µì¡í•œ íë¦„ì„ êµ¬ì¡°í™”í•˜ë©´ ë‹¹ì‹ ì´ 1ë“± ì „ëµê°€!",
    "INTP":"í˜¸ê¸°ì‹¬ í­ë°œ ì—°êµ¬ì ğŸ” ê°€ì„¤ ì„¸ìš°ê³  ê·¼ê±°ë¡œ ë…¼íŒŒí•˜ì!",
    "ENTJ":"ì‚¬ë ¹ê´€ ë¦¬ë”ì‹­ ğŸ’¼ ëª©í‘œ-ì ˆì°¨-ì„±ê³¼, ê¹”ë”í•œ ë“œë¼ì´ë¸Œ!",
    "ENTP":"í† ë¡ ì˜ í­ê²©ê¸° ğŸ’¥ ê´€ì ì„ ë°”ê¿”ë³´ë©° ë…¼ìŸí˜• ì§ˆë¬¸ì— ê°•í•´ìš”!",
    "INFJ":"ì˜ë¯¸ íƒìƒ‰ê°€ ğŸŒŒ ì—­ì‚¬ ì† â€˜ì™œâ€™ë¥¼ ë°œê²¬í•´ ê°€ì¹˜ë¥¼ ì‡ì!",
    "INFP":"ìŠ¤í† ë¦¬ ë©”ì´ì»¤ ğŸ“– ì¸ë¬¼ ê°ì •ì„ Â·ìœ¤ë¦¬ì  ì„ íƒì— ê°•ì !",
    "ENFJ":"íŒ€ ë¹Œë” ğŸ¤ ì—­í•  ë¶„ë‹´Â·í˜‘ì—… í”„ë ˆì„ìœ¼ë¡œ ë°°ì›€ í™•ì¥!",
    "ENFP":"ì•„ì´ë””ì–´ í­ì£½ ğŸ† ì°½ì˜ì  í”„ë¡œì íŠ¸Â·ì½˜í…ì¸  ì œì‘ì´ ì°°ë–¡!",
    "ISTJ":"ì„±ì‹¤ì˜ ì •ì„ ğŸ“ ë£¨í‹´ê³¼ í‘œì¤€ ì ˆì°¨ë¡œ ì™„ì„±ë„ UP!",
    "ISFJ":"ì„¸ì‹¬í•œ ëŒë´„ ğŸŒ¿ ì •ë¦¬Â·ì •ëˆÂ·ë…¸íŠ¸í…Œì´í‚¹ì˜ ì¥ì¸!",
    "ESTJ":"ìš´ì˜ì˜ ë‹¬ì¸ ğŸ—‚ï¸ ê³„íšâ†’ì‹¤í–‰â†’ê²€í†  ë£¨í”„ê°€ ë¬´ê¸°!",
    "ESFJ":"ë¶„ìœ„ê¸° ë©”ì´ì»¤ ğŸ‰ í˜‘ë™Â·ë°œí‘œÂ·ì„œí¬íŠ¸ì—ì„œ ë¹›ë‚˜ìš”!",
    "ISTP":"ì‹¤í—˜ê°€ ê³µëŒì´ ğŸ› ï¸ ëª¨í˜•Â·ì§€ë„Â·ê²Œì„ìœ¼ë¡œ Hands-on!",
    "ISFP":"ê°ê°í˜• ì•„í‹°ìŠ¤íŠ¸ ğŸ¨ ì‹œê°í™”Â·ì¹´ë“œÂ·ì½œë¼ì£¼ë¡œ ê¸°ì–µ ê³ ì •!",
    "ESTP":"ì•¡ì…˜ í”Œë ˆì´ì–´ ğŸƒ ì¦‰ì‹œ ì‹œë„â†’í”¼ë“œë°±â†’ê°œì„ !",
    "ESFP":"ìŠ¤í…Œì´ì§€ ì¥ì¸ ğŸ¤ í¼í¬ë¨¼ìŠ¤í˜• ë°œí‘œÂ·ë¸Œì´ë¡œê·¸ë¡œ ì‹¬í™”!"
}

# MBTI ê²€ì¦ ë¦¬ìŠ¤íŠ¸
MBTIS = list(MBTI_GROUP.keys())

# ------------------------- UI ìƒë‹¨ -------------------------
rainbow_title("MBTI Ã— ì—­ì‚¬ ê³µë¶€ ì¶”ì²œ ğŸ§­ğŸ“š")
st.caption("ì¤‘í•™ìƒ ì·¨í–¥ì €ê²© ğŸ˜ ì´ëª¨ì§€ íŒ¡íŒ¡ + ì¸í„°ë™ì…˜ ê°€ë“! (í•œêµ­ì‚¬Â·ì„¸ê³„ì‚¬ ë§ì¶¤)")

col1, col2 = st.columns([1,3])
with col1:
    mbti = st.selectbox("MBTIë¥¼ ê³¨ë¼ìš” âœ¨", MBTIS, index=MBTIS.index("ENFP"))
    go = st.button("ì¶”ì²œ ë³´ê¸° ğŸ”®")
with col2:
    st.info("Tip) ë³¸ì¸/ì¹œêµ¬ MBTIë¡œ ë°”ê¿”ë³´ë©° â€˜ë‚˜ë‘ ë§ëŠ” ê³µë¶€ë²•â€™ì„ ë¹„êµí•´ ë³´ì„¸ìš”! ğŸ‘¯")

# ë¡œë”© ì—°ì¶œ
def loading_bar(txt="ë‚˜ë§Œì˜ ì¶”ì²œì„ ì¤€ë¹„ì¤‘..."):
    with st.spinner(txt):
        prog = st.progress(0)
        for i in range(0,101,8):
            time.sleep(0.03)
            prog.progress(i)
    st.balloons()
    st.toast("ì™„ë£Œ! ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ë³´ì„¸ìš” ğŸ¤©", icon="âœ…")

# ------------------------- ì»¨í…ì¸  ìƒì„± í•¨ìˆ˜ -------------------------
def make_week_plan(group_key):
    # ê°„ë‹¨ ì£¼ê°„ ë£¨í‹´: í•œêµ­ì‚¬/ì„¸ê³„ì‚¬ ë²ˆê°ˆì•„ê°€ë©° í•µì‹¬ì—­ëŸ‰
    g = BASE_STRATEGY[group_key]
    core = " Â· ".join(g["core"][:4])
    return [
        ("ì›”", f"í•µì‹¬ ê°œë… ë¯¸ë‹ˆ ê°•ì˜ ìš”ì•½(10ë¶„) + {core} ì •ë¦¬(20ë¶„) + í€´ì¦ˆ(10ë¶„)"),
        ("í™”", "í•œêµ­ì‚¬ â€” í™œë™ ê³¼ì œ 1 ì§„í–‰(30ë¶„) + ì˜¤ë‹µ íƒœê¹…(10ë¶„)"),
        ("ìˆ˜", "ì„¸ê³„ì‚¬ â€” í™œë™ ê³¼ì œ 1 ì§„í–‰(30ë¶„) + ì´ë¯¸ì§€ ìš”ì•½(10ë¶„)"),
        ("ëª©", "ê¸°ì¶œ ìœ í˜• 20ë¬¸ í•­í•´ â›µ (ì—°í‘œ/ì‚¬ë£Œ ì¤‘ì‹¬)"),
        ("ê¸ˆ", "í† ë¡ /ë°œí‘œ/ì½˜í…ì¸  ì œì‘ ğŸ¤ (íŒ€/ê°œì¸ ì„ íƒ)"),
        ("í† ", "í˜„ì¥Â·ì§€ë„Â·ì˜ìƒìœ¼ë¡œ í™•ì¥ ğŸ” (ê°€ë³ê²Œ 30~40ë¶„)"),
        ("ì¼", "ì£¼ê°„ ë¦¬ì…‹: ì˜¤ë‹µ ë£¨í”„ â™»ï¸ + ë‹¤ìŒ ì£¼ ëª©í‘œ 3ì¤„ ğŸ¯")
    ]

def section_block(title, bullets, icon="ğŸ“Œ"):
    st.markdown(f"### {icon} {title}")
    for b in bullets:
        st.markdown(f"- {b}")

def activity_block(title, items, icon="ğŸ§ª"):
    st.markdown(f"#### {icon} {title}")
    for i in items:
        st.markdown(f"- {i}")

def edtech_block():
    st.markdown("### ğŸ› ï¸ ì—ë“€í…Œí¬ ë„êµ¬ (ì¤‘í•™ìƒ ì°°ë–¡)")
    st.markdown(
        """
        - **í€´ì¦ˆ**: Kahoot/Quizizz/Wordwall â€” ê²Œì„ì²˜ëŸ¼ ë³µìŠµ ğŸ®  
        - **ë³´ë“œ/ì •ë¦¬**: Canva/Google Jamboard(ë˜ëŠ” FigJam) â€” ê°œë… ì¹´ë“œÂ·íƒ€ì„ë¼ì¸ ğŸ§©  
        - **ì§€ë„/í˜„ì¥ê°**: Google Earth/Street View â€” ì‚¬ë£Œ+ì§€ë„ë¡œ ë§¥ë½ ì—°ê²° ğŸ—ºï¸  
        - **í† ë¡ /ë…¹ìŒ**: Vocaroo/Padlet â€” 1ë¶„ ì£¼ì¥ ë…¹ìŒ & ì„œë¡œ í”¼ë“œë°± ğŸ™ï¸
        """
    )

def tips_block(tips):
    st.markdown("### ğŸ’¡ ê³ ë“ì  ê¿€íŒ")
    for t in tips:
        st.markdown(f"- {t}")

# ------------------------- ë©”ì¸ ë¡œì§ -------------------------
if go:
    loading_bar()

    gkey = MBTI_GROUP[mbti]
    ginfo = GROUPS[gkey]
    base = BASE_STRATEGY[gkey]

    st.markdown("---")
    st.subheader(f"{mbti} | {ginfo['name']} {ginfo['emoji']}")
    st.success(PERSONA.get(mbti,"ë„ˆë§Œì˜ ê°•ì ìœ¼ë¡œ ê³µë¶€í•´ë´ìš”! âœ¨"))
    st.caption(f"í•µì‹¬ í•™ìŠµ ê¸°ì§ˆ: **{ginfo['vibe']}**")

    # íƒ­: í•œêµ­ì‚¬ / ì„¸ê³„ì‚¬ / ë£¨í‹´ & ì²´í¬ë¦¬ìŠ¤íŠ¸
    tab_k, tab_w, tab_r = st.tabs(["ğŸ‡°ğŸ‡· í•œêµ­ì‚¬", "ğŸŒ ì„¸ê³„ì‚¬", "ğŸ—“ï¸ ë£¨í‹´Â·ì²´í¬ë¦¬ìŠ¤íŠ¸"])

    with tab_k:
        section_block("ì´ ìœ í˜•ì— ì°°ë–¡ì¸ ê³µë¶€ë²•", base["core"], icon="ğŸ¯")
        activity_block("ì¶”ì²œ í™œë™ (ìˆ˜ì—…Â·ììœ¨í•™ìŠµ ê²¸ìš©)", base["k_activities"], icon="ğŸ¯")
        edtech_block()
        tips_block(base["tips"])
        with st.expander("ğŸ“ ë¯¸ë‹ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸"):
            st.write("â–¡ ì˜¤ëŠ˜ ë°°ìš´ í•µì‹¬ê°œë… 3ê°œ ìš”ì•½í•˜ê¸°")
            st.write("â–¡ ì‚¬ë£Œ 1ê°œë¥¼ â€˜ëˆ„ê°€/ì–¸ì œ/ì™œ/ë¬´ì—‡ì„â€™ë¡œ ë¶„ì„")
            st.write("â–¡ ì˜¤ë‹µ 3ê°œ ì›ì¸ íƒœê·¸ ë‹¬ê¸°(ê°œë…/ì—°í‘œ/ì‚¬ë£Œ)")

    with tab_w:
        section_block("ì´ ìœ í˜•ì— ì°°ë–¡ì¸ ê³µë¶€ë²•", base["core"], icon="ğŸ¯")
        activity_block("ì¶”ì²œ í™œë™ (ìˆ˜ì—…Â·ììœ¨í•™ìŠµ ê²¸ìš©)", base["w_activities"], icon="ğŸ›ï¸")
        edtech_block()
        tips_block(base["tips"])
        with st.expander("ğŸŒ ë¯¸ë‹ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸"):
            st.write("â–¡ ì‚¬ê±´ 1ê°œë¥¼ ì„¸ê³„ì§€ë„ì— í•€ ì°ê³  ì£¼ë³€êµ­ ë°˜ì‘ ë©”ëª¨")
            st.write("â–¡ ë™ì‹œê¸° í•œêµ­ì‚¬ì™€ ì—°ê²° ê³ ë¦¬ 1ê°œ ì°¾ê¸°")
            st.write("â–¡ ë…¼ìŸì  ì§ˆë¬¸ì— ì°¬ë°˜ ê·¼ê±° 1ê°œì”© ì“°ê¸°")

    with tab_r:
        plan = make_week_plan(gkey)
        st.markdown("### ğŸ—“ï¸ 1ì£¼ ë£¨í‹´(ìƒ˜í”Œ)")
        for day, line in plan:
            st.markdown(f"- **{day}**: {line}")
        st.markdown("### âœ… ì„±ì·¨ ë£¨í”„")
        st.markdown("**ëª©í‘œ ì„¤ì • â†’ ì‹¤ì²œ(ìŠ¤í”„ë¦°íŠ¸) â†’ í”¼ë“œë°± â†’ ì˜¤ë‹µë£¨í”„ â†’ ë‹¤ìŒ ëª©í‘œ ê°±ì‹ **")
        st.info("Tip) â€˜25ë¶„ ì§‘ì¤‘ + 5ë¶„ íœ´ì‹â€™ í¬ëª¨ë„ë¡œë¡œ íƒ„ë ¥ ìœ ì§€! ğŸ…")

    # ì‘ì€ ë³´ìƒ ì—°ì¶œ
    st.success("ë¯¸ì…˜ ì–¸ë½! ì˜¤ëŠ˜ 20ë¶„ë§Œ íˆ¬ìí•´ì„œ â€˜í•µì‹¬ ê°œë… 3ê°œâ€™ ì¹´ë“œ ë§Œë“¤ì–´ ë³´ê¸° ğŸ“‡")
    st.toast(random.choice(["ëŒ€ë‹¨í•´ìš”! ğŸ¤©","ì¢‹ì€ ì¶œë°œ! ğŸš€","ì„±ì¥ ì¤‘! ğŸŒ±","ì§‘ì¤‘ë ¥ ë§Œì ! ğŸ’¯"]), icon="ğŸ‰")

else:
    st.markdown(
        f"#### ì•„ë˜ì—ì„œ MBTIë¥¼ ê³ ë¥´ê³  **ì¶”ì²œ ë³´ê¸° ğŸ”®** ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”! {' '.join(random.sample(EMOJI_POOL, k=12))}"
    )
    st.markdown("> í•œêµ­ì‚¬Â·ì„¸ê³„ì‚¬ ê°ê° **íƒ­**ìœ¼ë¡œ ë§ì¶¤ ì „ëµì´ í¼ì³ì§‘ë‹ˆë‹¤ âœ¨")
